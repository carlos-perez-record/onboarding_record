<div class="card shadow-lg hover:shadow-xl transition-shadow duration-300 h-full flex flex-col">
  <!-- Imagen -->
  <% if job_posting.image.attached? %>
    <div class="aspect-video overflow-hidden rounded-t-lg">
      <%= image_tag job_posting.image,
          class: "w-full h-full object-cover",
          alt: job_posting.title %>
    </div>
  <% end %>

  <!-- Contenido -->
  <div class="p-6 flex-1 flex flex-col">
    <!-- TÃ­tulo -->
    <h3 class="text-xl font-bold text-gray-900 mb-3 line-clamp-2">
      ðŸ’¼ <%= job_posting.title %>
    </h3>

    <!-- Fechas -->
    <div class="space-y-2 mb-4 text-sm text-gray-600">
      <div class="flex items-center gap-2">
        <span class="font-semibold">ðŸ“… Inicio:</span>
        <%= l(job_posting.start_date, format: :long) %>
      </div>
      <div class="flex items-center gap-2">
        <span class="font-semibold">ðŸ“… Fin:</span>
        <%= l(job_posting.end_date, format: :long) %>
      </div>
    </div>

    <!-- Badge de estado (solo vigente se muestra en pÃºblico) -->
    <div class="mb-4">
      <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
        âœ… Convocatoria Vigente
      </span>
    </div>

    <!-- BotÃ³n Participar -->
    <div class="mt-auto">
      <% if user_signed_in? && current_user.aspirante? %>
        <% already_applied = job_posting.job_applications.exists?(user_id: current_user.id) %>
        <% if already_applied %>
          <button type="button" disabled class="w-full btn btn-success opacity-50 cursor-not-allowed">
            âœ… Ya participas
          </button>
        <% else %>
          <%= button_to job_applications_path(job_posting_id: job_posting.id), method: :post, class: "w-full btn btn-primary" do %>
            ðŸŽ¯ Participar
          <% end %>
        <% end %>
      <% else %>
        <%= link_to register_path, class: "w-full btn btn-primary" do %>
          ðŸŽ¯ Participar
        <% end %>
      <% end %>
    </div>
  </div>
</div>
