<div class="bg-white border border-gray-200 rounded-lg shadow hover:shadow-lg transition-shadow duration-300 overflow-hidden flex flex-col h-64 cursor-pointer" onclick="window.location='<%= job_posting_path(job_posting) %>'">
  <!-- Ãrea de contenido -->
  <div class="p-4 flex flex-col h-full">
    <!-- TÃ­tulo - mÃ¡ximo 2 lÃ­neas -->
    <h3 class="text-base font-bold text-gray-900 mb-3 line-clamp-2">
      ğŸ’¼ <%= job_posting.title %>
    </h3>

    <!-- Fechas y badge -->
    <div class="flex flex-wrap items-center gap-2 mb-4 text-xs text-gray-600">
      <span class="whitespace-nowrap">ğŸ“… <%= job_posting.start_date.strftime('%d/%m/%Y') %></span>
      <span class="px-2 py-1 inline-flex text-xs font-semibold rounded-full bg-green-100 text-green-800 whitespace-nowrap">
        âœ… Vigente
      </span>
    </div>

    <!-- BotÃ³n Participar - siempre al fondo -->
    <div class="mt-auto" onclick="event.stopPropagation();">
      <% if user_signed_in? && current_user.aspirante? %>
        <% already_applied = job_posting.job_applications.exists?(user_id: current_user.id) %>
        <% if already_applied %>
          <button type="button" disabled class="btn btn-success opacity-50 cursor-not-allowed text-xs py-1.5 px-3 w-full">
            âœ… Ya participas
          </button>
        <% else %>
          <%= button_to job_applications_path(job_posting_id: job_posting.id), method: :post, class: "btn btn-primary text-xs py-1.5 px-3 w-full" do %>
            ğŸ¯ Participar
          <% end %>
        <% end %>
      <% else %>
        <%= link_to register_path, class: "btn btn-primary text-xs py-1.5 px-3 w-full text-center", onclick: "event.stopPropagation();" do %>
          ğŸ¯ Participar
        <% end %>
      <% end %>
    </div>
  </div>
</div>
