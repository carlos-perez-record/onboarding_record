<div class="curriculum-container">
  <div class="curriculum-header">
    <h2 class="curriculum-title"> Mi Curr铆culum</h2>
    <div class="btn-group">
      <%= link_to "锔 Editar", edit_curriculum_path(@curriculum), class: "btn btn-warning", "aria-label": "Editar mi curr铆culum" %>
      <%= link_to "猬锔 Volver", root_path, class: "btn btn-secondary", "aria-label": "Volver a la p谩gina de inicio" %>
    </div>
  </div>

  <!-- Secci贸n: Datos Personales -->
  <div class="section-box">
    <h3 class="section-title">Datos Personales</h3>

    <!-- Foto y Nombres -->
    <div class="photo-info-container">
      <% if @curriculum.photo.attached? %>
        <div>
          <img src="<%= url_for(@curriculum.photo) %>" alt="Foto de perfil" class="photo-img">
        </div>
      <% end %>
      <div>
        <p class="info-text">
          <strong>Nombre Completo:</strong><br>
          <%= "#{@curriculum.first_name} #{@curriculum.last_name}" %>
        </p>
        <p class="info-text">
          <strong>Identificaci贸n:</strong><br>
          <%= @curriculum.identification %>
        </p>
        <p class="info-text-last">
          <strong>Tel茅fono:</strong><br>
          <%= @curriculum.phone_number %>
        </p>
      </div>
    </div>

    <hr class="divider">

    <!-- Informaci贸n Personal -->
    <div class="info-grid">
      <div>
        <p class="info-label">Fecha de Nacimiento</p>
        <p class="info-value"><%= I18n.l(@curriculum.birth_date, format: :long) %> (<%= @curriculum.age %> a帽os)</p>

        <p class="info-label">Ciudad</p>
        <p class="info-value"><%= @curriculum.city %></p>

        <p class="info-label">Disponibilidad para Viajar</p>
        <p class="info-value">
          <span class="badge <%= @curriculum.available_to_travel? ? 'badge-success' : 'badge-danger' %>">
            <%= @curriculum.available_to_travel? ? 'S铆' : 'No' %>
          </span>
        </p>
      </div>

      <div>
        <p class="info-label">Direcci贸n</p>
        <p class="info-value"><%= @curriculum.address %></p>

        <p class="info-label">Departamento</p>
        <p class="info-value"><%= @curriculum.department %>, <%= @curriculum.country %></p>

        <p class="info-label">Disponibilidad para Cambio de Residencia</p>
        <p class="info-text-last">
          <span class="badge <%= @curriculum.available_to_relocate? ? 'badge-success' : 'badge-danger' %>">
            <%= @curriculum.available_to_relocate? ? 'S铆' : 'No' %>
          </span>
        </p>
      </div>
    </div>
  </div>

  <!-- Secci贸n: Perfil Profesional -->
  <div class="section-box">
    <h3 class="section-title">Perfil Profesional</h3>
    <p class="profile-text">
      <%= @curriculum.profile_description.presence || "No hay descripci贸n" %>
    </p>
  </div>

  <!-- Secci贸n: Idiomas -->
  <div class="section-box">
    <h3 class="section-title">Idiomas</h3>
    <div class="badge-container">
      <% if @curriculum.languages.present? && @curriculum.languages.any? %>
        <% @curriculum.languages.each do |lang| %>
          <span class="badge">
            <%= lang %>
          </span>
        <% end %>
      <% else %>
        <p class="empty-message">No hay idiomas registrados</p>
      <% end %>
    </div>
  </div>

  <!-- Secci贸n: Informaci贸n Acad茅mica -->
  <div class="section-box">
    <h3 class="section-title">Informaci贸n Acad茅mica</h3>
    
    <% if @curriculum.education_level.present? %>
      <p style="margin-bottom: 15px;">
        <strong>Nivel de Estudios:</strong> <%= @curriculum.education_level.capitalize %>
      </p>
    <% end %>
    
    <% if @curriculum.studies.any? %>
      <% @curriculum.studies.order(created_at: :desc).each do |study| %>
        <div class="study-item">
          <% if study.title.present? %>
            <h4 class="study-title" style="font-weight: bold; margin-bottom: 8px;">
              <%= study.title %>
            </h4>
          <% end %>
          
          <p class="study-institution" style="margin-bottom: 6px; color: #555;">
            <%= study.institution %>
          </p>
          
          <% if study.start_date.present? || study.end_date.present? %>
            <p class="study-dates" style="margin-bottom: 6px; color: #666; font-size: 0.95em;">
              <%= study.start_date&.strftime('%m/%Y') || '?' %> - <%= study.end_date&.strftime('%m/%Y') || 'Actualidad' %>
            </p>
          <% end %>
          
          <% if study.status.present? %>
            <p class="study-status">
              <span class="badge" style="<%= case study.status
                    when 'cursando' then 'background-color: #28a745; color: white;'
                    when 'pausado' then 'background-color: #ffc107; color: black;'
                    when 'finalizado' then 'background-color: #6c757d; color: white;'
                    end %>">
                <%= study.status.capitalize %>
              </span>
            </p>
          <% end %>
        </div>
      <% end %>
    <% else %>
      <p class="empty-state">No hay estudios registrados</p>
    <% end %>
  </div>

  <!-- Informaci贸n Meta -->
  <div class="meta-info">
    <p class="info-text-last">
      <strong>Creado:</strong> <%= I18n.l(@curriculum.created_at, format: :long) %><br>
      <strong>Actualizado:</strong> <%= I18n.l(@curriculum.updated_at, format: :long) %>
    </p>
  </div>
</div>
