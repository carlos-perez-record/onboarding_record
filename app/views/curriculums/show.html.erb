<div class="curriculum-container">
  <div class="curriculum-header">
    <h2 class="curriculum-title">Mi Currículum</h2>
    <div class="btn-group">
      <%= link_to "Editar", edit_curriculum_path(@curriculum), style: "padding: 8px 12px; background-color: #ffc107; color: #333; text-decoration: none; border-radius: 4px; font-weight: 600;", "aria-label": "Editar mi currículum" %>
      <%= link_to "Volver", root_path, style: "padding: 8px 12px; background-color: #6c757d; color: white; text-decoration: none; border-radius: 4px; font-weight: 600;", "aria-label": "Volver a la página de inicio" %>
    </div>
  </div>

  <!-- Sección: Datos Personales -->
  <div class="section-box">
    <h3 class="section-title">Datos Personales</h3>

    <!-- Foto y Nombres -->
    <div class="photo-info-container">
      <% if @curriculum.photo.attached? %>
        <div>
          <img src="<%= url_for(@curriculum.photo) %>" alt="Foto de perfil" class="photo-img">
        </div>
      <% end %>
      <div>
        <p class="info-text">
          <strong>Nombre Completo:</strong><br>
          <%= "#{@curriculum.first_name} #{@curriculum.last_name}" %>
        </p>
        <p class="info-text">
          <strong>Identificación:</strong><br>
          <%= @curriculum.identification %>
        </p>
        <p class="info-text-last">
          <strong>Teléfono:</strong><br>
          <%= @curriculum.phone_number %>
        </p>
      </div>
    </div>

    <hr class="divider">

    <!-- Información Personal -->
    <div class="info-grid">
      <div>
        <p class="info-label">Fecha de Nacimiento</p>
        <p class="info-value"><%= I18n.l(@curriculum.birth_date, format: :long) %> (<%= @curriculum.age %> años)</p>

        <p class="info-label">Ciudad</p>
        <p class="info-value"><%= @curriculum.city %></p>

        <p class="info-label">Disponibilidad para Viajar</p>
        <p class="info-value">
          <span class="badge <%= @curriculum.available_to_travel? ? 'badge-success' : 'badge-danger' %>">
            <%= @curriculum.available_to_travel? ? 'Sí' : 'No' %>
          </span>
        </p>
      </div>

      <div>
        <p class="info-label">Dirección</p>
        <p class="info-value"><%= @curriculum.address %></p>

        <p class="info-label">Departamento</p>
        <p class="info-value"><%= @curriculum.department %>, <%= @curriculum.country %></p>

        <p class="info-label">Disponibilidad para Cambio de Residencia</p>
        <p class="info-text-last">
          <span class="badge <%= @curriculum.available_to_relocate? ? 'badge-success' : 'badge-danger' %>">
            <%= @curriculum.available_to_relocate? ? 'Sí' : 'No' %>
          </span>
        </p>
      </div>
    </div>
  </div>

  <!-- Sección: Perfil Profesional -->
  <div class="section-box">
    <h3 class="section-title">Perfil Profesional</h3>
    <p class="profile-text">
      <%= @curriculum.profile_description.presence || "No hay descripción" %>
    </p>
  </div>

  <!-- Sección: Idiomas -->
  <div class="section-box">
    <h3 class="section-title">Idiomas</h3>
    <div class="badge-container">
      <% @curriculum.languages.present? && @curriculum.languages.any? ? @curriculum.languages.each do |lang| %>
        <span class="badge">
          <%= lang %>
        </span>
      <% end : (render 'shared/empty_state', message: 'No hay idiomas registrados') %>
    </div>
  </div>

  <!-- Sección: Información Académica -->
  <div class="section-box">
    <h3 class="section-title">Información Académica</h3>
    <% if @curriculum.studies.any? %>
      <% @curriculum.studies.order(created_at: :desc).each do |study| %>
        <div class="study-item">
          <h4 class="study-title">
            <%= study.institution %>
          </h4>
          
          <% if study.title.present? %>
            <p class="study-subtitle">
              <%= study.title %>
            </p>
          <% end %>
          
          <div class="study-dates">
            <% if study.status.present? %>
              <span class="badge <%= case study.status
                    when 'cursando' then 'background-color: #28a745; color: white;'
                    when 'pausado' then 'background-color: #ffc107; color: black;'
                    when 'finalizado' then 'background-color: #6c757d; color: white;'
                    end %>">
                <%= study.status.capitalize %>
              </span>
            <% end %>
            
            <% if study.start_date.present? || study.end_date.present? %>
              <span>
                <%= study.start_date&.strftime('%m/%Y') || '?' %> - <%= study.end_date&.strftime('%m/%Y') || 'Actualidad' %>
              </span>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <p class="empty-state">No hay estudios registrados</p>
    <% end %>
  </div>

  <!-- Información Meta -->
  <div class="meta-info">
    <p class="info-text-last">
      <strong>Creado:</strong> <%= I18n.l(@curriculum.created_at, format: :long) %><br>
      <strong>Actualizado:</strong> <%= I18n.l(@curriculum.updated_at, format: :long) %>
    </p>
  </div>
</div>
