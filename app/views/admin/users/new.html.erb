<%= turbo_frame_tag "admin_users_content" do %>
  <div class="max-w-2xl mx-auto px-4 md:px-0">
	<div class="card mb-6">
		<h2 class="heading-2 mb-6">Crear nuevo usuario</h2>

		<%= form_with(model: [@user], local: true, url: admin_users_path) do |form| %>
			<% if @user.errors.any? %>
				<div role="alert" aria-live="assertive" class="bg-red-100 border border-red-300 p-4 mb-6 rounded">
					<h4 class="text-lg font-semibold text-red-800 mb-2">
						<span aria-label="Errores de validación">⚠️</span>
						<%= pluralize(@user.errors.count, "error") %> impidieron guardar este usuario:
					</h4>
					<ul class="list-disc list-inside text-red-700">
						<% @user.errors.full_messages.each do |message| %>
							<li><%= message %></li>
						<% end %>
					</ul>
				</div>
			<% end %>

			<div class="mb-4">
				<%= form.label :email, "Correo electrónico", class: "form-label" %>
				<%= form.email_field :email, 
					autofocus: true,
					autocomplete: "email",
					required: true,
					aria: { required: "true" },
					class: "form-input" %>
			</div>

			<div class="mb-4">
				<%= form.label :password, "Contraseña", class: "form-label" %>
				<%= form.password_field :password, 
					autocomplete: "new-password",
					required: true,
					aria: { required: "true" },
					class: "form-input" %>
			</div>

			<div class="mb-4">
				<%= form.label :password_confirmation, "Confirmar contraseña", class: "form-label" %>
				<%= form.password_field :password_confirmation, 
					autocomplete: "new-password",
					required: true,
					aria: { required: "true" },
					class: "form-input" %>
			</div>

			<div class="mb-6">
				<%= form.label :role, "Rol", class: "form-label" %>
				<%= form.select :role, 
					{ "Admin" => "admin", "Aspirante" => "aspirante", "Reclutador" => "reclutador" }, 
					{},
					{ required: true, aria: { required: "true" }, class: "form-input" } %>
			</div>

			<div class="flex flex-wrap gap-3">
				<%= form.submit "Crear usuario", class: "btn btn-success flex-1" %>
				<%= link_to "Cancelar", admin_users_path, class: "btn btn-secondary flex-1 text-center" %>
			</div>
		<% end %>
	</div>

	<div class="text-center mt-4">
		<%= link_to "⬅️ Volver a usuarios", admin_users_path, class: "link" %>
	</div>
</div>
